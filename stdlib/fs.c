/* Generated by AetherLang C Backend */
#include <stdint.h>
#include <stdbool.h>
#include <stdio.h>
#include <stdlib.h>
#include <immintrin.h>  /* SSE/AVX */

/* AetherLang Runtime */
static void aether_print(const char* s) { printf("%s", s); }
static void aether_println(const char* s) { printf("%s\n", s); }
static void aether_print_i64(int64_t n) { printf("%lld", (long long)n); }
static void aether_println_i64(int64_t n) { printf("%lld\n", (long long)n); }
static void aether_assert(bool c) { if(!c) { fprintf(stderr, "Assertion failed\n"); exit(1); } }

/* Struct Definitions */
struct File {
    void* handle;
    uint8_t* path;
    bool is_open;
};

struct File* file_open_read(uint8_t*);
struct File* file_open_write(uint8_t*);
struct File* file_open_append(uint8_t*);
bool file_close(struct File**);
bool file_is_open(struct File**);
uint64_t file_read_all(struct File**, uint8_t*, uint64_t);
uint64_t file_write(struct File**, uint8_t*, uint64_t);
bool file_write_line(struct File**, uint8_t*);
bool file_exists(uint8_t*);
bool file_readable(uint8_t*);
bool file_writable(uint8_t*);
bool file_delete(uint8_t*);
bool file_rename(uint8_t*, uint8_t*);
bool dir_create(uint8_t*);
bool dir_remove(uint8_t*);
bool dir_change(uint8_t*);
bool dir_current(uint8_t*, uint64_t);
uint8_t* read_file(uint8_t*);
bool write_file(uint8_t*, uint8_t*, uint64_t);

struct File* file_open_read(uint8_t* _arg0) {
    bool* _t10;
    int64_t _t3;
    int64_t _t4;
    int64_t _t9;
    struct File* _t5;
    uint8_t* _t0;
    uint8_t* _t1;
    uint8_t* _t2;
    uint8_t** _t7;
    void* _t8;
    void** _t6;
    
    _t0 = _arg0;
    _t1 = (uint8_t*)"r\u{0}";
    _t2 = _t1;
    fopen(_t0, _t2);
    _t4 = _t3;
    struct File _alloca__t5;
    _t5 = &_alloca__t5;
    _t6 = &_t5->handle;
    *_t6 = _t4;
    _t7 = &_t5->path;
    *_t7 = _t0;
    _t8 = (void*)0LL;
    _t9 = _t4 != _t8;
    _t10 = &_t5->is_open;
    *_t10 = _t9;
    return _t5;
}

struct File* file_open_write(uint8_t* _arg0) {
    bool* _t10;
    int64_t _t3;
    int64_t _t4;
    int64_t _t9;
    struct File* _t5;
    uint8_t* _t0;
    uint8_t* _t1;
    uint8_t* _t2;
    uint8_t** _t7;
    void* _t8;
    void** _t6;
    
    _t0 = _arg0;
    _t1 = (uint8_t*)"w\u{0}";
    _t2 = _t1;
    fopen(_t0, _t2);
    _t4 = _t3;
    struct File _alloca__t5;
    _t5 = &_alloca__t5;
    _t6 = &_t5->handle;
    *_t6 = _t4;
    _t7 = &_t5->path;
    *_t7 = _t0;
    _t8 = (void*)0LL;
    _t9 = _t4 != _t8;
    _t10 = &_t5->is_open;
    *_t10 = _t9;
    return _t5;
}

struct File* file_open_append(uint8_t* _arg0) {
    bool* _t10;
    int64_t _t3;
    int64_t _t4;
    int64_t _t9;
    struct File* _t5;
    uint8_t* _t0;
    uint8_t* _t1;
    uint8_t* _t2;
    uint8_t** _t7;
    void* _t8;
    void** _t6;
    
    _t0 = _arg0;
    _t1 = (uint8_t*)"a\u{0}";
    _t2 = _t1;
    fopen(_t0, _t2);
    _t4 = _t3;
    struct File _alloca__t5;
    _t5 = &_alloca__t5;
    _t6 = &_t5->handle;
    *_t6 = _t4;
    _t7 = &_t5->path;
    *_t7 = _t0;
    _t8 = (void*)0LL;
    _t9 = _t4 != _t8;
    _t10 = &_t5->is_open;
    *_t10 = _t9;
    return _t5;
}

bool file_close(struct File** _arg0) {
    bool _t11;
    bool _t3;
    bool* _t10;
    bool* _t13;
    bool* _t2;
    int32_t _t14;
    int64_t _t15;
    int64_t _t7;
    int64_t _t8;
    struct File* _t12;
    struct File* _t1;
    struct File* _t4;
    struct File* _t9;
    struct File** _t0;
    void* _t6;
    void** _t5;
    
    _t0 = _arg0;
    _t1 = *_t0;
    _t2 = &_t1->is_open;
    _t3 = *_t2;
    if (_t3) goto L_then; else goto L_else;
L_then:
    _t4 = *_t0;
    _t5 = &_t4->handle;
    _t6 = *_t5;
    fclose(_t6);
    _t8 = _t7;
    _t9 = *_t0;
    _t10 = &_t9->is_open;
    _t11 = *_t10;
    _t12 = *_t0;
    _t13 = &_t12->is_open;
    *_t13 = 0;
    _t14 = (int32_t)0LL;
    _t15 = _t8 == _t14;
    return _t15;
L_else:
    goto L_merge;
L_merge:
    return 1;
}

bool file_is_open(struct File** _arg0) {
    bool _t3;
    bool* _t2;
    struct File* _t1;
    struct File** _t0;
    
    _t0 = _arg0;
    _t1 = *_t0;
    _t2 = &_t1->is_open;
    _t3 = *_t2;
    return _t3;
}

uint64_t file_read_all(struct File** _arg0, uint8_t* _arg1, uint64_t _arg2) {
    bool _t5;
    bool _t6;
    bool* _t4;
    int64_t _t13;
    struct File* _t10;
    struct File* _t3;
    struct File** _t0;
    uint64_t _t2;
    uint64_t _t7;
    uint64_t _t9;
    uint8_t* _t1;
    void* _t12;
    void* _t8;
    void** _t11;
    
    _t0 = _arg0;
    _t1 = _arg1;
    _t2 = _arg2;
    _t3 = *_t0;
    _t4 = &_t3->is_open;
    _t5 = *_t4;
    _t6 = !_t5;
    if (_t6) goto L_then; else goto L_else;
L_then:
    _t7 = (uint64_t)0LL;
    return _t7;
L_else:
    goto L_merge;
L_merge:
    _t8 = (void*)_t1;
    _t9 = (uint64_t)1LL;
    _t10 = *_t0;
    _t11 = &_t10->handle;
    _t12 = *_t11;
    fread(_t8, _t9, _t2, _t12);
    return _t13;
}

uint64_t file_write(struct File** _arg0, uint8_t* _arg1, uint64_t _arg2) {
    bool _t5;
    bool _t6;
    bool* _t4;
    int64_t _t13;
    struct File* _t10;
    struct File* _t3;
    struct File** _t0;
    uint64_t _t2;
    uint64_t _t7;
    uint64_t _t9;
    uint8_t* _t1;
    void* _t12;
    void* _t8;
    void** _t11;
    
    _t0 = _arg0;
    _t1 = _arg1;
    _t2 = _arg2;
    _t3 = *_t0;
    _t4 = &_t3->is_open;
    _t5 = *_t4;
    _t6 = !_t5;
    if (_t6) goto L_then; else goto L_else;
L_then:
    _t7 = (uint64_t)0LL;
    return _t7;
L_else:
    goto L_merge;
L_merge:
    _t8 = (void*)_t1;
    _t9 = (uint64_t)1LL;
    _t10 = *_t0;
    _t11 = &_t10->handle;
    _t12 = *_t11;
    fwrite(_t8, _t9, _t2, _t12);
    return _t13;
}

bool file_write_line(struct File** _arg0, uint8_t* _arg1) {
    bool _t4;
    bool _t5;
    bool* _t3;
    int32_t _t11;
    int32_t _t19;
    int64_t _t10;
    int64_t _t12;
    int64_t _t18;
    int64_t _t20;
    int64_t _t9;
    struct File* _t15;
    struct File* _t2;
    struct File* _t6;
    struct File** _t0;
    uint8_t* _t13;
    uint8_t* _t14;
    uint8_t* _t1;
    void* _t17;
    void* _t8;
    void** _t16;
    void** _t7;
    
    _t0 = _arg0;
    _t1 = _arg1;
    _t2 = *_t0;
    _t3 = &_t2->is_open;
    _t4 = *_t3;
    _t5 = !_t4;
    if (_t5) goto L_then; else goto L_else;
L_then:
    return 0;
L_else:
    goto L_merge;
L_merge:
    _t6 = *_t0;
    _t7 = &_t6->handle;
    _t8 = *_t7;
    fputs(_t1, _t8);
    _t10 = _t9;
    _t11 = (int32_t)0LL;
    _t12 = _t10 >= _t11;
    if (_t12) goto L_then; else goto L_else;
L_then:
    _t13 = (uint8_t*)"\n\u{0}";
    _t14 = _t13;
    _t15 = *_t0;
    _t16 = &_t15->handle;
    _t17 = *_t16;
    fputs(_t14, _t17);
    goto L_merge;
L_else:
    goto L_merge;
L_merge:
    _t19 = (int32_t)0LL;
    _t20 = _t10 >= _t19;
    return _t20;
}

bool file_exists(uint8_t* _arg0) {
    int32_t _t2;
    int64_t _t1;
    int64_t _t3;
    uint8_t* _t0;
    
    _t0 = _arg0;
    access(_t0, F_OK);
    _t2 = (int32_t)0LL;
    _t3 = _t1 == _t2;
    return _t3;
}

bool file_readable(uint8_t* _arg0) {
    int32_t _t2;
    int64_t _t1;
    int64_t _t3;
    uint8_t* _t0;
    
    _t0 = _arg0;
    access(_t0, R_OK);
    _t2 = (int32_t)0LL;
    _t3 = _t1 == _t2;
    return _t3;
}

bool file_writable(uint8_t* _arg0) {
    int32_t _t2;
    int64_t _t1;
    int64_t _t3;
    uint8_t* _t0;
    
    _t0 = _arg0;
    access(_t0, W_OK);
    _t2 = (int32_t)0LL;
    _t3 = _t1 == _t2;
    return _t3;
}

bool file_delete(uint8_t* _arg0) {
    int32_t _t2;
    int64_t _t1;
    int64_t _t3;
    uint8_t* _t0;
    
    _t0 = _arg0;
    remove(_t0);
    _t2 = (int32_t)0LL;
    _t3 = _t1 == _t2;
    return _t3;
}

bool file_rename(uint8_t* _arg0, uint8_t* _arg1) {
    int32_t _t3;
    int64_t _t2;
    int64_t _t4;
    uint8_t* _t0;
    uint8_t* _t1;
    
    _t0 = _arg0;
    _t1 = _arg1;
    rename(_t0, _t1);
    _t3 = (int32_t)0LL;
    _t4 = _t2 == _t3;
    return _t4;
}

bool dir_create(uint8_t* _arg0) {
    int32_t _t3;
    int64_t _t2;
    int64_t _t4;
    uint32_t _t1;
    uint8_t* _t0;
    
    _t0 = _arg0;
    _t1 = (uint32_t)493LL;
    mkdir(_t0, _t1);
    _t3 = (int32_t)0LL;
    _t4 = _t2 == _t3;
    return _t4;
}

bool dir_remove(uint8_t* _arg0) {
    int32_t _t2;
    int64_t _t1;
    int64_t _t3;
    uint8_t* _t0;
    
    _t0 = _arg0;
    rmdir(_t0);
    _t2 = (int32_t)0LL;
    _t3 = _t1 == _t2;
    return _t3;
}

bool dir_change(uint8_t* _arg0) {
    int32_t _t2;
    int64_t _t1;
    int64_t _t3;
    uint8_t* _t0;
    
    _t0 = _arg0;
    chdir(_t0);
    _t2 = (int32_t)0LL;
    _t3 = _t1 == _t2;
    return _t3;
}

bool dir_current(uint8_t* _arg0, uint64_t _arg1) {
    int64_t _t2;
    int64_t _t3;
    int64_t _t5;
    uint64_t _t1;
    uint8_t* _t0;
    uint8_t* _t4;
    
    _t0 = _arg0;
    _t1 = _arg1;
    getcwd(_t0, _t1);
    _t3 = _t2;
    _t4 = (uint8_t*)0LL;
    _t5 = _t3 != _t4;
    return _t5;
}

uint8_t* read_file(uint8_t* _arg0) {
    bool _t25;
    bool _t39;
    bool _t4;
    bool _t5;
    bool* _t3;
    int32_t _t34;
    int32_t _t35;
    int64_t _t12;
    int64_t _t13;
    int64_t _t18;
    int64_t _t19;
    int64_t _t20;
    int64_t _t24;
    int64_t _t32;
    int64_t _t33;
    int64_t _t9;
    struct File* _t1;
    struct File* _t2;
    uint64_t _t16;
    uint64_t _t17;
    uint64_t _t28;
    uint64_t _t29;
    uint8_t _t37;
    uint8_t* _t0;
    uint8_t* _t21;
    uint8_t* _t22;
    uint8_t* _t23;
    uint8_t* _t26;
    uint8_t* _t36;
    uint8_t* _t38;
    uint8_t* _t6;
    void* _t11;
    void* _t15;
    void* _t27;
    void* _t31;
    void* _t8;
    void** _t10;
    void** _t14;
    void** _t30;
    void** _t7;
    
    _t0 = _arg0;
    struct File _alloca__t1;
    _t1 = &_alloca__t1;
    file_open_read(_t1, _t0);
    _t2 = _t1;
    _t3 = &_t2->is_open;
    _t4 = *_t3;
    _t5 = !_t4;
    if (_t5) goto L_then; else goto L_else;
L_then:
    _t6 = (uint8_t*)0LL;
    return _t6;
L_else:
    goto L_merge;
L_merge:
    _t7 = &_t2->handle;
    _t8 = *_t7;
    fseek(_t8, 0LL, SEEK_END);
    _t10 = &_t2->handle;
    _t11 = *_t10;
    ftell(_t11);
    _t13 = _t12;
    _t14 = &_t2->handle;
    _t15 = *_t14;
    rewind(_t15);
    _t16 = (uint64_t)_t13;
    _t17 = (uint64_t)1LL;
    _t18 = _t16 + _t17;
    _t19 = (int64_t)_t18;
    malloc(_t19);
    _t21 = (uint8_t*)_t20;
    _t22 = _t21;
    _t23 = (uint8_t*)0LL;
    _t24 = _t22 == _t23;
    if (_t24) goto L_then; else goto L_else;
L_then:
    _t25 = file_close(((void)0));
    _t26 = (uint8_t*)0LL;
    return _t26;
L_else:
    goto L_merge;
L_merge:
    _t27 = (void*)_t22;
    _t28 = (uint64_t)1LL;
    _t29 = (uint64_t)_t13;
    _t30 = &_t2->handle;
    _t31 = *_t30;
    fread(_t27, _t28, _t29, _t31);
    _t33 = _t32;
    _t34 = (int32_t)_t33;
    _t35 = _t34;
    _t36 = &_t22[_t35];
    _t37 = *_t36;
    _t38 = &_t22[_t35];
    *_t38 = 0LL;
    _t39 = file_close(((void)0));
    return _t22;
}

bool write_file(uint8_t* _arg0, uint8_t* _arg1, uint64_t _arg2) {
    bool _t14;
    bool _t6;
    bool _t7;
    bool* _t5;
    int64_t _t12;
    int64_t _t13;
    int64_t _t15;
    struct File* _t3;
    struct File* _t4;
    uint64_t _t2;
    uint64_t _t9;
    uint8_t* _t0;
    uint8_t* _t1;
    void* _t11;
    void* _t8;
    void** _t10;
    
    _t0 = _arg0;
    _t1 = _arg1;
    _t2 = _arg2;
    struct File _alloca__t3;
    _t3 = &_alloca__t3;
    file_open_write(_t3, _t0);
    _t4 = _t3;
    _t5 = &_t4->is_open;
    _t6 = *_t5;
    _t7 = !_t6;
    if (_t7) goto L_then; else goto L_else;
L_then:
    return 0;
L_else:
    goto L_merge;
L_merge:
    _t8 = (void*)_t1;
    _t9 = (uint64_t)1LL;
    _t10 = &_t4->handle;
    _t11 = *_t10;
    fwrite(_t8, _t9, _t2, _t11);
    _t13 = _t12;
    _t14 = file_close(((void)0));
    _t15 = _t13 == _t2;
    return _t15;
}

