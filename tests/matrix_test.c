/* Generated by AetherLang C Backend */
#include <stdint.h>
#include <stdbool.h>
#include <stdio.h>
#include <stdlib.h>
#include <immintrin.h>  /* SSE/AVX */

/* AetherLang Runtime */
static void aether_print(const char* s) { printf("%s", s); }
static void aether_println(const char* s) { printf("%s\n", s); }
static void aether_print_i64(int64_t n) { printf("%lld", (long long)n); }
static void aether_println_i64(int64_t n) { printf("%lld\n", (long long)n); }
static void aether_assert(bool c) { if(!c) { fprintf(stderr, "Assertion failed\n"); exit(1); } }

/* Struct Definitions */
struct Matrix4x4 {
    float* data;
};

struct Vec4 {
    float x;
    float y;
    float z;
    float w;
};

struct Matrix4x4* mat4_identity(void);
struct Vec4* vec4_new(float, float, float, float);
float vec4_dot(struct Vec4*, struct Vec4*);
void main(void);

struct Matrix4x4* mat4_identity(void) {
    float** _t1;
    struct Matrix4x4* _t0;
    struct Matrix4x4* _t2;
    
    struct Matrix4x4 _alloca__t0;
    _t0 = &_alloca__t0;
    _t1 = &_t0->data;
    *_t1 = ((void)0);
    _t2 = _t0;
    return _t2;
}

struct Vec4* vec4_new(float _arg0, float _arg1, float _arg2, float _arg3) {
    float _t0;
    float _t1;
    float _t2;
    float _t3;
    float* _t5;
    float* _t6;
    float* _t7;
    float* _t8;
    struct Vec4* _t4;
    
    _t0 = _arg0;
    _t1 = _arg1;
    _t2 = _arg2;
    _t3 = _arg3;
    struct Vec4 _alloca__t4;
    _t4 = &_alloca__t4;
    _t5 = &_t4->x;
    *_t5 = _t0;
    _t6 = &_t4->y;
    *_t6 = _t1;
    _t7 = &_t4->z;
    *_t7 = _t2;
    _t8 = &_t4->w;
    *_t8 = _t3;
    return _t4;
}

float vec4_dot(struct Vec4* _arg0, struct Vec4* _arg1) {
    float _t10;
    float _t14;
    float _t16;
    float _t20;
    float _t22;
    float _t3;
    float _t5;
    float _t8;
    float* _t13;
    float* _t15;
    float* _t19;
    float* _t21;
    float* _t2;
    float* _t4;
    float* _t7;
    float* _t9;
    int64_t _t11;
    int64_t _t12;
    int64_t _t17;
    int64_t _t18;
    int64_t _t23;
    int64_t _t24;
    int64_t _t6;
    struct Vec4* _t0;
    struct Vec4* _t1;
    
    _t0 = _arg0;
    _t1 = _arg1;
    _t2 = &_t0->x;
    _t3 = *_t2;
    _t4 = &_t1->x;
    _t5 = *_t4;
    _t6 = _t3 * _t5;
    _t7 = &_t0->y;
    _t8 = *_t7;
    _t9 = &_t1->y;
    _t10 = *_t9;
    _t11 = _t8 * _t10;
    _t12 = _t6 + _t11;
    _t13 = &_t0->z;
    _t14 = *_t13;
    _t15 = &_t1->z;
    _t16 = *_t15;
    _t17 = _t14 * _t16;
    _t18 = _t12 + _t17;
    _t19 = &_t0->w;
    _t20 = *_t19;
    _t21 = &_t1->w;
    _t22 = *_t21;
    _t23 = _t20 * _t22;
    _t24 = _t18 + _t23;
    return _t24;
}

void main(void) {
    float _t4;
    float _t5;
    int64_t _t6;
    struct Vec4* _t0;
    struct Vec4* _t1;
    struct Vec4* _t2;
    struct Vec4* _t3;
    
    struct Vec4 _alloca__t0;
    _t0 = &_alloca__t0;
    vec4_new(_t0, 1, 2, 3, 4);
    _t1 = _t0;
    struct Vec4 _alloca__t2;
    _t2 = &_alloca__t2;
    vec4_new(_t2, 1, 1, 1, 1);
    _t3 = _t2;
    _t4 = vec4_dot(_t1, _t3);
    _t5 = _t4;
    aether_println("Matrix test passed!");
    return;
}

