// Test self.field assignment
// Simpler version of Lexer

extern "C" {
    fn putchar(c: i32) -> i32;
}

pub struct Counter {
    pub value: u64,
}

impl Counter {
    pub fn inc(self: &mut Counter) {
        self.value = self.value + 1;
    }
    
    pub fn get(self: &Counter) -> u64 {
        return self.value;
    }
}

fn print_num(n: u64) {
    putchar(48 + (n as i32));
}

fn main() -> i32 {
    puts("=== Self Field Assignment Test ===");
    
    let mut c: Counter = Counter { value: 0 };
    
    puts("Initial:");
    print_num(c.value);
    puts(" = c.value (should be 0)");
    
    c.inc();
    puts("After inc:");
    print_num(c.value);
    puts(" = c.value (should be 1)");
    
    c.inc();
    c.inc();
    puts("After 2 more inc:");
    print_num(c.value);
    puts(" = c.value (should be 3)");
    
    puts("Done!");
    return 0;
}
